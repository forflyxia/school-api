WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'confluence.extra.jira:jira-issues-view-mode-async-resource', location = 'jira/jira-issues-view-mode/lazy-loading.js' */
define("confluence/jim/jira/jira-issues-view-mode/lazy-loading",["jquery","ajs","underscore","confluence/jim/jira/jira-issues-view-mode/fetching-job"],function(c,h,l,a){var m="wr!confluence.extra.jira:refresh-resources";var e;var k=null;var g={renderUISingleJIMFromMacroHTML:function(o,n){l.each(o,function(r,q){var p=n.filter('[data-jira-key="'+q+'"]');p.each(function(t,u){var s=c(u);if(s.hasClass("jira-table")){e.updateRefreshedElement(s,r[0])}else{s.replaceWith(r[t]||r[0])}})})},renderUISingleJIMInErrorCase:function(o,q){var n=["aui-message","aui-message-warning","jim-error-message"];var p=h.I18n.getText("jiraissues.unexpected.error")+" "+q;if(o.hasClass("jira-table")){n.push("jim-error-message-table");e.updateRefreshedElement(o,p)}else{n.push("jim-error-message-single");o.find(".summary").text(p);o.find(".jira-status").remove();o.find(".issue-placeholder").remove();o.find(".aui-icon-wait").remove()}o.removeClass("jira-issue jira-table").addClass(n.join(" "))}};var j={handleAjaxSuccess:function(o,n,p){l.each(o,function(r){var q=k.filter('[data-client-id="'+r.clientId+'"]');if(r.status===200){g.renderUISingleJIMFromMacroHTML(JSON.parse(r.data).htmlMacro,q)}else{if(r.status!==202){g.renderUISingleJIMInErrorCase(q,r.data)}}})},handleAjaxError:function(p,o){var n=p.clientIds.split(",");l.each(n,function(q){var r=k.filter('[data-client-id="'+q+'"]');g.renderUISingleJIMInErrorCase(r,o)})}};var d={findAllClientIdInPageContent:function(){var n=l.map(k,function(p){var o=c(p).attr("data-client-id");if(o){return o}});return l.uniq(n)},collectFetchingJobs:function(){var p=d.findAllClientIdInPageContent();var n=[];var o=new a({clientIds:p.join(",")});if(o.clientIds){n.push(o)}return n}};var b={loadOneByOneJiraServerStrategy:function(){var n=d.collectFetchingJobs();var q=n.length;var p=c.Deferred();var o=0;n.forEach(function(r){r.startJobWithRetry().fail(function(u,s,t){j.handleAjaxError(u,t)}).always(function(){if(++o===q){p.resolve()}}).progress(function(u,s,v){j.handleAjaxSuccess.apply(this,arguments);var t=l.reduce(u,function(x,w){if(w.status==202){x.push(w.clientId)}return x},[]);r.clientIds=t.join(",")})});return p.promise()}};var f={loadTableResourceIfNeeded:function(){var o=c.Deferred();var n=c(".wiki-content .jira-table[data-jira-key]");if(n.length){WRM.require(m,function(){e=require("confluence/jim/jira/jira-issues-view-mode/refresh-table");e.init();o.resolve()})}else{o.resolve()}return o.promise()}};var i={init:function(n){k=n;return c.when(f.loadTableResourceIfNeeded()).pipe(b.loadOneByOneJiraServerStrategy)}};return i});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jira-issues-view-mode-async-resource', location = 'jira/jira-issues-view-mode/fix-ui.js' */
define("confluence/jim/jira/jira-issues-view-mode/fix-ui",["jquery","ajs"],function(c,a){var b={fixBreakIconInOldConf:function(){var d=b.compareVersion(a.version,"5.4.4")<=0;if(!d){return}c(".jim-error-message").each(function(){var f=c(this);var e=f;if(f.hasClass("jim-error-message-table")){e=f.find(".aui-message")}e.addClass("warning").prepend('<span class="aui-icon icon-warning"></span>')})},compareVersion:function(j,h){if(typeof j!=="string"||typeof h!=="string"){return false}var f=j.split(".");var e=h.split(".");var g=0;var d=Math.max(f.length,e.length);for(;g<d;g++){if((f[g]&&!e[g]&&parseInt(f[g])>0)||(parseInt(f[g])>parseInt(e[g]))){return 1}else{if((e[g]&&!f[g]&&parseInt(e[g])>0)||(parseInt(f[g])<parseInt(e[g]))){return -1}}}return 0}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jira-issues-view-mode-async-resource', location = 'jira/jira-issues-view-mode/fetching-job.js' */
define("confluence/jim/jira/jira-issues-view-mode/fetching-job",["jquery","ajs","confluence/jim/confluence-shim","confluence/jim/util/retry-caller"],function(d,b,e,a){var c=function(f){this.clientIds=f.clientIds;var g=1000;this.TICK_RETRIES=[0,1*g,1*g,2*g,3*g,5*g,8*g,13*g,13*g,13*g];this.RETRY_HTTP_CODE=202};c.prototype.startJob=function(){return this.fetchSingeJiraServer()};c.prototype.fetchSingeJiraServer=function(){var f=b.contextPath()+"/rest/jiraanywhere/1.0/jira/clientIds/";var g=d.ajax({type:"POST",url:f,data:this.clientIds,contentType:"application/json",cache:true});g.clientIds=this.clientIds;return g};c.prototype.startJobWithRetry=function(){return a(this.startJob,{name:this.clientIds,delays:this.TICK_RETRIES,context:this,tester:function(g,f,h){return h&&h.status===this.RETRY_HTTP_CODE}})};return c});
}catch(e){WRMCB(e)};